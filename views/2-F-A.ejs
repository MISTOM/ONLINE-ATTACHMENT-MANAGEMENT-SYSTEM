<div class="modal fade" id="askmodal" tabindex="-1" role="dialog" aria-labelledby="askmodalLabel" data-backdrop="static">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">
                <% if(user.is2faEnabled){ %>
                    Disable 2-Factor Authentication
                    <% }else{ %>
                    Enable 2-Factor Authentication
                    <% } %>
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="modal-body text-center">
        <a href="#" onclick="enableDisable2fa()" class="btn btn-sm btn-info" data-dismiss="modal" >Yes</a>
        <a class="btn btn-sm btn-info " data-dismiss="modal">No</a> 
        </div>

      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->  

 <!-- Modal 2 -->
  <div class="modal fade" id="enable2fa" tabindex="-1" role="dialog" aria-labelledby="enable2faLabel" data-backdrop="static">
    <div class="modal-dialog" role="document">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Secure your Account</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">
            <form action="\twoFactorAuthenticate" method="POST">
            <div class="md-form">
                <i class="fa fa-lock prefix"></i>
                <input type="number" id="code" class="form-control text-center" required>
                <label for="code" >Input the code we've sent you</label>
            </div>
         </div>

         <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Go</button>
         </div>
            </form>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->  
<p class="d-none" id="2faData"
data-userid="<%= user.user_id %>"
data-_2faroute="<% if(user.is2faEnabled){ %>deactivate2FA<% }else{ %>activate2FA<% } %>">
</p>

<div class="" id="alertFor2fa"></div>

<script type="text/javascript">

    function enableDisable2fa() {
      let alertbox = document.getElementById("alertFor2fa");  
      let id = document.getElementById("2faData").dataset.userid;
      let _2faroute = document.getElementById("2faData").dataset._2faroute;
      let url = `${process.env.HOST}${process.env.PORT}/dashboard/${_2faroute}/${id}`;
      $.ajax({
          url: url,
          type: 'GET',
          crossDomain: true,
          dataType: 'json',
          headers: { 'Access-Control_Allow_Origin': '*' },
          success: function (res, data) {
              console.log("success done|2fa request is:", res);

              let alertmsg = `<a  class="close" data-dismiss="alert" aria-label="close">&times</a><strong>Success: </strong>You have succesfully ${res} your 2-Factor Authentication` 
              alertbox.classList.add("_2faAlert", "alert", "alert-success");
              alertbox.innerHTML = alertmsg;
          },
          error: function (xhr) {
              console.log(xhr);
          }
        })
    }
</script>

 